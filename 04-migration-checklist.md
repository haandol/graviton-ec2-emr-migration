# EMR Graviton4 마이그레이션 — 실행 체크리스트

> **인쇄하여 실행 시 사용하는 체크리스트. 각 Phase 완료 시 체크하고 날짜/담당자를 기록한다.**

---

## Phase 0: 현행 환경 보존 및 인벤토리 조사

| #   | 항목                                               | 완료 | 날짜 | 담당자 | 비고 |
| --- | -------------------------------------------------- | ---- | ---- | ------ | ---- |
| 0-1 | **기존 EC2/EMR 노드 AMI 생성 (원본 상태 완전 백업)** | ☐ |      |        | 운영 무중단(--no-reboot) |
| 0-2 | **EBS 데이터 볼륨 스냅샷 생성 (해당 시)**          | ☐    |      |        |      |
| 0-3 | EMR / Spark / Zeppelin / Java / Python 버전 기록   | ☐    |      |        |      |
| 0-4 | `pip freeze` 패키지 목록 추출 및 저장              | ☐    |      |        |      |
| 0-5 | Zeppelin 노트북 전체 목록 및 Python 셀 수 파악     | ☐    |      |        |      |
| 0-6 | 인스턴스 타입, VPC/Subnet, 보안그룹, IAM 역할 기록 | ☐    |      |        |      |
| 0-7 | 인벤토리 결과 템플릿 작성 완료                     | ☐    |      |        |      |

**Phase 0 완료 승인**: **\*\***\_\_**\*\*** (서명/날짜)

---

## Phase 0.5: 스테이징 환경 구성

> 상세: [메인 가이드 §6](01-emr-migration-overview.md#6-phase-05-스테이징-환경-구성-운영-무중단)

| #     | 항목                                                     | 완료 | 날짜 | 담당자 | 비고 |
| ----- | -------------------------------------------------------- | ---- | ---- | ------ | ---- |
| 0.5-1 | 스테이징 인스턴스/클러스터 생성 (기존 AMI 또는 동일 설정) | ☐   |      |        |      |
| 0.5-2 | 스테이징에 노트북/설정 복원 확인                         | ☐    |      |        |      |
| 0.5-3 | 스테이징에서 기존 환경 동작 확인 (Zeppelin, Spark)        | ☐    |      |        |      |

**Phase 0.5 완료 승인**: **\*\***\_\_**\*\*** (서명/날짜)

---

## Phase 1: Python 2 → Python 3 전환

> 상세: [Python 2 → 3 전환 가이드](02-python2-to-python3-guide.md)

| #   | 항목                                                         | 완료 | 날짜 | 담당자 | 비고 |
| --- | ------------------------------------------------------------ | ---- | ---- | ------ | ---- |
| 1-1 | `caniusepython3`으로 패키지 호환성 점검 완료                 | ☐    |      |        |      |
| 1-2 | 호환성 매트릭스 작성 (Py3 지원 여부 + ARM64 휠 여부)         | ☐    |      |        |      |
| 1-3 | `2to3` / `futurize`로 자동 변환 실행                         | ☐    |      |        |      |
| 1-4 | 주요 변경점 수동 검토 (print, unicode, 나눗셈, dict, except) | ☐    |      |        |      |
| 1-5 | Zeppelin 노트북 Python 셀 변환 완료                          | ☐    |      |        |      |
| 1-6 | 외부 패키지 Py3 호환 버전 확인 및 대체 패키지 결정           | ☐    |      |        |      |
| 1-7 | 변환된 코드 단위 테스트 통과 (결과값 비교)                   | ☐    |      |        |      |

**Phase 1 완료 승인**: **\*\***\_\_**\*\*** (서명/날짜)

---

## Phase 2: Zeppelin 업그레이드

> 상세: [Intel → Graviton 전환 가이드 §2](03-intel-to-graviton-guide.md#2-phase-2-zeppelin-업그레이드)

| #   | 항목                                                                 | 완료 | 날짜 | 담당자 | 비고 |
| --- | -------------------------------------------------------------------- | ---- | ---- | ------ | ---- |
| 2-1 | 설정 파일 백업 (`zeppelin-site.xml`, `shiro.ini`, `zeppelin-env.sh`) | ☐    |      |        |      |
| 2-2 | `zeppelin.server.addr = 0.0.0.0` 설정 확인                           | ☐    |      |        |      |
| 2-3 | Python 인터프리터 경로 Python 3으로 변경                             | ☐    |      |        |      |
| 2-4 | `PYSPARK_PYTHON` / `PYSPARK_DRIVER_PYTHON` 환경변수 설정             | ☐    |      |        |      |
| 2-5 | 노트북 JSON 파일 복사 및 로드 확인                                   | ☐    |      |        |      |

**Phase 2 완료 승인**: **\*\***\_\_**\*\*** (서명/날짜)

---

## Phase 2.5: S3 이관 허브 구성 및 데이터 이관

> 상세: [Intel → Graviton 전환 가이드 §4](03-intel-to-graviton-guide.md#4-phase-25-s3-이관-허브-구성-및-데이터-이관)

| #     | 항목                                                    | 완료 | 날짜 | 담당자 | 비고 |
| ----- | ------------------------------------------------------- | ---- | ---- | ------ | ---- |
| 2.5-1 | S3 이관 허브 버킷 생성 및 버전 관리 활성화              | ☐    |      |        |      |
| 2.5-2 | 변환 완료 노트북 (Python 3) S3 업로드                   | ☐    |      |        |      |
| 2.5-3 | Zeppelin/Spark 설정 파일 S3 업로드                      | ☐    |      |        |      |
| 2.5-4 | Python 패키지 목록 (requirements-py3.txt) S3 업로드     | ☐    |      |        |      |
| 2.5-5 | 커스텀 스크립트, cron job 백업 S3 업로드                 | ☐    |      |        |      |
| 2.5-6 | HDFS 데이터 S3 이관 (해당 시)                           | ☐    |      |        |      |
| 2.5-7 | Hive Metastore 덤프 또는 Glue Catalog 확인 (해당 시)    | ☐    |      |        |      |
| 2.5-8 | EBS 데이터 볼륨 이관 (스냅샷 또는 S3, 해당 시)          | ☐    |      |        |      |
| 2.5-9 | 부트스트랩 스크립트 S3 업로드                            | ☐    |      |        |      |

**Phase 2.5 완료 승인**: **\*\***\_\_**\*\*** (서명/날짜)

---

## Phase 3: Graviton4(ARM64) 인스턴스 전환

> 상세: [Intel → Graviton 전환 가이드 §3](03-intel-to-graviton-guide.md#3-phase-3-graviton4arm64-인스턴스-전환)

| #   | 항목                                                   | 완료 | 날짜 | 담당자 | 비고 |
| --- | ------------------------------------------------------ | ---- | ---- | ------ | ---- |
| 3-1 | ARM64 AMI 선택 (Amazon Linux 2023 ARM64)               | ☐    |      |        |      |
| 3-2 | 인스턴스 타입 매핑 결정 (m5→m8g, r5→r8g 등)            | ☐    |      |        |      |
| 3-3 | Amazon Corretto 11 ARM64 설치 확인                     | ☐    |      |        |      |
| 3-4 | pip 19.3+ 확인                                         | ☐    |      |        |      |
| 3-5 | ARM64 패키지 휠 설치 확인 (소스 빌드 필요 패키지 처리) | ☐    |      |        |      |
| 3-6 | VPC/Subnet/보안그룹/IAM 동일성 유지 확인               | ☐    |      |        |      |

**Phase 3 완료 승인**: **\*\***\_\_**\*\*** (서명/날짜)

---

## Phase 4: IaC 자동화

> 상세: [Intel → Graviton 전환 가이드 §4](03-intel-to-graviton-guide.md#5-phase-4-iac-자동화-및-클러스터-프로비저닝)

| #   | 항목                                         | 완료 | 날짜 | 담당자 | 비고 |
| --- | -------------------------------------------- | ---- | ---- | ------ | ---- |
| 4-1 | Terraform 템플릿 작성                        | ☐    |      |        |      |
| 4-2 | 부트스트랩 스크립트 작성 및 테스트           | ☐    |      |        |      |
| 4-3 | 노트북 S3 동기화 스크립트 작성 및 테스트     | ☐    |      |        |      |
| 4-4 | IaC로 클러스터 프로비저닝 테스트 완료        | ☐    |      |        |      |

**Phase 4 완료 승인**: **\*\***\_\_**\*\*** (서명/날짜)

---

## Phase 4.5: 새 Graviton 클러스터 데이터/설정 복원

> 상세: [Intel → Graviton 전환 가이드 §6](03-intel-to-graviton-guide.md#6-새-graviton-클러스터-데이터설정-복원)

| #     | 항목                                                        | 완료 | 날짜 | 담당자 | 비고 |
| ----- | ----------------------------------------------------------- | ---- | ---- | ------ | ---- |
| 4.5-1 | S3에서 변환된 노트북 복원                                   | ☐    |      |        |      |
| 4.5-2 | Zeppelin 설정 머지 (interpreter.json 등, 덮어쓰기 금지)     | ☐    |      |        |      |
| 4.5-3 | 커스텀 스크립트 복원                                        | ☐    |      |        |      |
| 4.5-4 | cron job 복원 (수동 검토 후 적용)                            | ☐    |      |        |      |
| 4.5-5 | Zeppelin 재시작 및 HTTP 응답 확인                            | ☐    |      |        |      |

**Phase 4.5 완료 승인**: **\*\***\_\_**\*\*** (서명/날짜)

---

## Phase 4.7: 네트워크 및 데이터 소스 연결 검증

> 상세: [Intel → Graviton 전환 가이드 §7](03-intel-to-graviton-guide.md#7-네트워크-및-데이터-소스-연결-검증)

| #     | 항목                                                  | 완료 | 날짜 | 담당자 | 비고 |
| ----- | ----------------------------------------------------- | ---- | ---- | ------ | ---- |
| 4.7-1 | S3 버킷 접근 확인                                     | ☐    |      |        |      |
| 4.7-2 | RDS/Aurora 연결 확인 (해당 시)                         | ☐    |      |        |      |
| 4.7-3 | Redshift 연결 확인 (해당 시)                           | ☐    |      |        |      |
| 4.7-4 | 온프레미스/VPN 경유 접근 확인 (해당 시)                | ☐    |      |        |      |
| 4.7-5 | IAM 역할 권한 확인 (S3, Glue 등)                       | ☐    |      |        |      |
| 4.7-6 | EMR YARN 내부 통신 확인 (Master ↔ Core)               | ☐    |      |        |      |
| 4.7-7 | Spark 분산 잡 실행 테스트 (yarn cluster mode)          | ☐    |      |        |      |

**Phase 4.7 완료 승인**: **\*\***\_\_**\*\*** (서명/날짜)

---

## Phase 5: 통합 테스트 및 성능 검증

> 상세: [Intel → Graviton 전환 가이드 §8](03-intel-to-graviton-guide.md#8-통합-테스트-및-성능-검증)

| #   | 항목                            | 완료 | 날짜 | 담당자 | 비고 |
| --- | ------------------------------- | ---- | ---- | ------ | ---- |
| 5-1 | Zeppelin UI 접속 확인           | ☐    |      |        |      |
| 5-2 | Spark 인터프리터 동작 확인      | ☐    |      |        |      |
| 5-3 | Python 3 패키지 import 확인     | ☐    |      |        |      |
| 5-4 | 기존 노트북 재실행 및 결과 검증 | ☐    |      |        |      |
| 5-5 | EMR 스텝 자동 테스트 통과       | ☐    |      |        |      |
| 5-6 | 성능 벤치마크 실행 및 기록      | ☐    |      |        |      |

**Phase 5 완료 승인**: **\*\***\_\_**\*\*** (서명/날짜)

---

## Go/No-Go 판정

| #   | 합격 기준                                                | 필수 여부 | 판정 |
| --- | -------------------------------------------------------- | --------- | ---- |
| G-1 | Zeppelin UI 정상 접속 및 로그인 가능                     | **필수**  | ☐    |
| G-2 | Spark 인터프리터 정상 동작 (SparkContext 생성, SQL 실행) | **필수**  | ☐    |
| G-3 | Python 3에서 모든 필수 패키지 import 성공                | **필수**  | ☐    |
| G-4 | 기존 노트북 100% 정상 실행 (결과값 일치)                 | **필수**  | ☐    |
| G-5 | EMR 스텝 테스트 잡 성공                                  | **필수**  | ☐    |
| G-6 | 성능이 Intel 대비 90% 이상                               | 권장      | ☐    |
| G-7 | 24시간 안정성 테스트 통과 (OOM, 크래시 없음)             | 권장      | ☐    |

> 필수 항목 중 하나라도 미달 시 **No-Go** → 원인 분석 후 재시도

**Go/No-Go 판정**: ☐ **Go** / ☐ **No-Go**

판정자: **\*\***\_\_**\*\*** (서명/날짜)

---

## Phase 6: 프로덕션 전환

> 상세: [Intel → Graviton 전환 가이드 §6](03-intel-to-graviton-guide.md#6-프로덕션-전환-cutover)

### 전환 전 사전 작업

| #   | 항목                                      | 완료 | 날짜 | 담당자 | 비고 |
| --- | ----------------------------------------- | ---- | ---- | ------ | ---- |
| 6-1 | Phase 0~5 모든 합격 기준 충족 확인        | ☐    |      |        |      |
| 6-2 | 기존 Intel 클러스터 최종 노트북 백업 완료 | ☐    |      |        |      |
| 6-3 | S3 노트북 동기화 최신 상태 확인           | ☐    |      |        |      |
| 6-4 | 롤백 절차 문서화 및 팀 공유 완료          | ☐    |      |        |      |
| 6-5 | 관련 팀에 전환 일정 공지                  | ☐    |      |        |      |
| 6-6 | CloudWatch 알람 및 대시보드 설정 완료     | ☐    |      |        |      |
| 6-7 | DNS/로드밸런서 전환 준비 (해당 시)        | ☐    |      |        |      |

### 전환 실행

| #    | 항목                                       | 완료 | 시간 | 담당자 | 비고 |
| ---- | ------------------------------------------ | ---- | ---- | ------ | ---- |
| 6-8  | T-24h: 최종 백업                           | ☐    |      |        |      |
| 6-9  | T-2h: 사용자 공지 및 잡 완료 대기          | ☐    |      |        |      |
| 6-10 | T-0: 기존 Zeppelin 서비스 중지             | ☐    |      |        |      |
| 6-11 | T-0: 신규 Graviton4 클러스터 활성화 확인   | ☐    |      |        |      |
| 6-12 | T-0: 최종 노트북 동기화                    | ☐    |      |        |      |
| 6-13 | T-0: DNS/LB 전환 (해당 시)                 | ☐    |      |        |      |
| 6-14 | T-0: 신규 클러스터 Zeppelin 접속 확인      | ☐    |      |        |      |
| 6-15 | T+1h: 안정성 모니터링                      | ☐    |      |        |      |
| 6-16 | T+24h: 일일 모니터링 및 사용자 피드백      | ☐    |      |        |      |
| 6-17 | T+7d: 안정화 기간 완료, 기존 클러스터 종료 | ☐    |      |        |      |

**프로덕션 전환 완료 승인**: **\*\***\_\_**\*\*** (서명/날짜)

---

## 롤백 준비

> 상세: [Intel → Graviton 전환 가이드 §7](03-intel-to-graviton-guide.md#7-롤백-절차)

| #   | 항목                               | 완료 | 날짜 | 담당자 | 비고 |
| --- | ---------------------------------- | ---- | ---- | ------ | ---- |
| R-1 | 롤백 트리거 조건 팀 합의           | ☐    |      |        |      |
| R-2 | 롤백 절차 문서화 및 팀 공유        | ☐    |      |        |      |
| R-3 | 기존 Intel 클러스터 대기 상태 유지 | ☐    |      |        |      |
| R-4 | S3 버전 관리 활성화                | ☐    |      |        |      |
| R-5 | Phase 0 AMI 존재 및 사용 가능 확인 | ☐    |      |        | 최후의 수단 |

### 롤백 트리거 조건 (참고)

| 조건                                    | 심각도       |
| --------------------------------------- | ------------ |
| Zeppelin UI 접속 불가 (30분 이상)       | **Critical** |
| Spark 인터프리터 반복 실패              | **Critical** |
| 핵심 노트북 실행 결과 불일치            | **High**     |
| Python 패키지 import 오류 (핵심 패키지) | **High**     |
| 성능 저하 30% 이상                      | **Medium**   |
| OOM/크래시 반복 발생                    | **Critical** |

### 롤백 실행 시 기록

| 단계 | 항목                                | 완료 | 시간 | 담당자 |
| ---- | ----------------------------------- | ---- | ---- | ------ |
| 1    | 롤백 결정 (팀 리드 승인)            | ☐    |      |        |
| 2    | 신규 클러스터 트래픽 차단           | ☐    |      |        |
| 3    | DNS/LB를 기존 Intel 클러스터로 전환 | ☐    |      |        |
| 4    | 기존 Intel 클러스터 Zeppelin 재시작 | ☐    |      |        |
| 5    | 기존 클러스터 정상 동작 확인        | ☐    |      |        |
| 6    | 신규 클러스터 데이터 보존 후 중지   | ☐    |      |        |
| 7    | 원인 분석 및 재시도 계획 수립       | ☐    |      |        |

**롤백 사유**: \***\*\*\*\*\***\*\*\***\*\*\*\*\***\_\***\*\*\*\*\***\*\*\***\*\*\*\*\***

**롤백 완료 승인**: **\*\***\_\_**\*\*** (서명/날짜)
